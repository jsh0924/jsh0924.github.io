---
title: ì¼ë³¸ IT Java ì›¹ê°œë°œì ìˆ˜ì—… 43ì¼ì°¨ - jsp
date: 2024-05-08 12:00:00
comments: true
categories: [study]
tags: [ê¸€ë¡œë²Œì¸, jsp]
render_with_liquid: false
---

ë‚´ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ì£¼ì²´ê°€  
ì„œë²„ì´ë©´ &#10140; ì„¸ì…˜  
ë¸Œë¼ìš°ì €ë©´ &#10140; ì¿ í‚¤  

## ì‹¤ìŠµ
### ë°©ëª…ë¡
````java
package com.bbs;

import java.io.IOException;
import java.sql.*;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

//@WebServlet("/bbs/VisitInsert")
public class VisitInsert extends HttpServlet {
	private static final long serialVersionUID = 1L;

	protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		request.setCharacterEncoding("utf-8");
		String writer = request.getParameter("writer");
		String memo = request.getParameter("memo"); // write.html í…Œì´ë¸”ì˜ nameê³¼ ë™ì¼
		
		System.out.println("ì‘ì„±ì : " + writer);
		System.out.println("ë‚´ìš© : " + memo);
		
		String sql = "insert into visit(no, writer, memo, regdate)" + "values(visit_seq.nextval, ?, ?, sysdate)"; // ë°›ì€ writer, memo ê°’ì„ ë‹¤ì‹œ dbì— ì§‘ì–´ë„£ìŒ
	
		Connection con = null;
		PreparedStatement pstmt = null;
		
		try {
			Class.forName("oracle.jdbc.driver.OracleDriver");
			con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl", "scott", "tiger");
			pstmt = con.prepareStatement(sql);
			pstmt.setString(1, writer);
			pstmt.setString(2, memo);
			pstmt.executeUpdate();
			
		} catch(ClassNotFoundException ce) {
			ce.printStackTrace();
			
		} catch(SQLException se) {
			se.printStackTrace();
			
		} finally {
			try {
				if (pstmt != null) {
					pstmt.close();
				}
			} catch (SQLException ss) {
				ss.printStackTrace();
			}
			
			try {
				if (con != null) {
					con.close();
				}
			} catch (SQLException ss) {
				ss.printStackTrace();
			}
		}
		
		response.sendRedirect("VisitList");
	}
	
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		processRequest(request, response);
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		processRequest(request, response);
	}

}
````
<br>

````java
package com.bbs;

import java.io.IOException;
import java.io.PrintWriter;
import java.sql.*;
import java.util.Date;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

//@WebServlet("/bbs/VisitList")
public class VisitList extends HttpServlet {
	private static final long serialVersionUID = 1L;
	
	protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		response.setContentType("text/html; charset=utf-8");
		PrintWriter out = response.getWriter();
		
		try {
			out.println("<html>");
			out.println("<head><title>ë°©ëª…ë¡ ë¦¬ìŠ¤íŠ¸</title></head>");
			out.println("<body>");
			
			String sql = "select no, writer, memo, regdate from visit order by no desc";
			
			Connection con = null;
			PreparedStatement pstmt = null;
			ResultSet rs = null;
			
			try {
				Class.forName("oracle.jdbc.driver.OracleDriver");
				con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl", "scott", "tiger");
				pstmt = con.prepareStatement(sql);
				rs = pstmt.executeQuery();
				
				while(rs.next()) {
					int no = rs.getInt("no");
					String writer = rs.getString("writer");
					String memo = rs.getString("memo");
					Date regdate = rs.getDate("regdate");
					
					out.println("<table align = center width = 500 border = 1>");
					out.println("<tr>");
					out.println("<th width = 50>ë²ˆí˜¸</th>");
					out.println("<td width = 50 align = center>" + no + "</td>");
					
					out.println("<th width = 70>ì‘ì„±ì</th>");
					out.println("<td width = 180 align = center>" + writer + "</td>");
					
					out.println("<th width = 50>ë‚ ì§œ</th>");
					out.println("<td width = 100 align = center>" + regdate + "</td>");
					out.println("</tr>");
					
					out.println("<tr>");
					out.println("<th width = 50>ë‚´ìš©</th>");
					out.println("<td colspan=5>&nbsp;");
					out.println("<textarea rows = 3 cols = 50>" + memo + "</textarea>");
					out.println("</td>");
					out.println("</tr>");
					out.println("</table>");
					out.println("<p>");
				}
			} catch (SQLException e) {
				e.printStackTrace();
			} catch (ClassNotFoundException ce) {
				ce.printStackTrace();
			} finally {
				try {
					if (rs != null) {
						rs.close();
					}
				} catch (SQLException ss) {
					ss.printStackTrace();
				}
				try {
					if (pstmt != null) {
						pstmt.close();
					}
				} catch (SQLException ss) {
					ss.printStackTrace();
				}
				try {
					if (con != null) {
						con.close();
					}
				} catch (SQLException ss) {
					ss.printStackTrace();
				}
			}
			out.println("<p align = center><a href=/bbs/write.html>ê¸€ì“°ê¸°</a></p>");
			out.println("</body>");
			out.println("</html>");
			
		} finally {
			out.close();
		}
	}

	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		processRequest(request, response);
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		processRequest(request, response);
	}

}
````
<br>

````html
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ë°©ëª…ë¡</title>
</head>
<body>
	<form action="/bbs/VisitInsert" method="post">
		<table width="500" border="1" align="center">
			<tr>
				<th width="70">ì‘ì„±ì</th>
				<td width="430">&nbsp;<input type="text" name="writer" size="50"></td>
			</tr>
			<tr>
				<th>ë‚´ìš©</th>
				<td>&nbsp;<textarea rows="7" cols="50" name="memo"></textarea></td>
			</tr>
			<tr>
				<td colspan="2" align="center"><input type="submit" value="ì €ì¥">&nbsp;&nbsp;<input type="reset" value="ì·¨ì†Œ"></td>
			</tr>
		</table>
	</form>
</body>
</html>
````
<br>
ë°©ëª…ë¡ì„ ë‚¨ê¸°ë©´ ì‘ì„±í•œ ëª©ë¡ì´ ëœ¬ë‹¤.  
<br>

### ë¡œê·¸ì¸ê³¼ ë¡œê·¸ì•„ì›ƒ
````java
package com.test;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class LoginServlet
 */
//@WebServlet("/Login")
public class LoginServlet extends HttpServlet {
	private static final long serialVersionUID = 1L;

	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		String userid = request.getParameter("userid");
		String passwd = request.getParameter("passwd");
		
		response.setContentType("text/html; charset=UTF-8");
		PrintWriter out = response.getWriter();
		
		out.print("<html>");
		out.print("<body>");
		
		out.print("ì•„ì´ë”” : " + userid + "<br>");
		out.print("íŒ¨ìŠ¤ì›Œë“œ : " + passwd + "<br>");
		
		out.print("</body>");
		out.print("</html>");
		
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		doGet(request, response);
	}

}
````
<br>

````java
package com.login;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

@WebServlet("/Login")
public class Login extends HttpServlet {
	private static final long serialVersionUID = 1L;

	protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		response.setContentType("text/html; charset=utf-8");
		PrintWriter out = response.getWriter();
		
		try {
			HttpSession session = request.getSession(false); // ë¡œê·¸ì¸ ì •ë³´ì— ì•„ë¬´ê²ƒë„ ì €ì¥ëœ ê²ƒì´ ì—†ê¸° ë•Œë¬¸ì— false
			
			if (session != null) { // ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•œ ê²½ìš°
				String sessionId = session.getId(); // id ê°’ì´ ìˆìœ¼ë©´ ë°˜í™˜
				System.out.println("ì„¸ì…˜ ì•„ì´ë”” : " + sessionId);
				String user = (String)session.getAttribute("user");
				
				out.println("<html><body>");
				out.println("<table width = '300' border = '1' >");
				out.println("<tr>");
				out.println("<td width = '300' align = 'center' >" + user + "ë‹˜ì´ ë¡œê·¸ì¸í–ˆìŠµë‹ˆë‹¤.</td>");
				out.println("</tr>");
				out.println("<tr>");
				out.println("<td align = 'center' >");
				out.println("<a href = '#'>íšŒì›ì •ë³´</a>");
				out.println("<a href = 'Logout'>ë¡œê·¸ì•„ì›ƒ</a>");
				out.println("</td>");
				out.println("</tr>");
				
				out.println("</body></html>");
				
			} else {
				out.println("<html><body>");
				out.println("<form method = 'post' action = 'LoginCheck'>");
				out.println("<table width = '300' border = '1' >");
				out.println("<tr>");
				out.println("<th width = '100' >ì•„ì´ë””</th>");
				out.println("<td width = '200' >&nbsp;<input type = 'text' name = 'id'>");
				out.println("</tr>");
				out.println("<tr>");
				out.println("<th width = '100' >íŒ¨ìŠ¤ì›Œë“œ</th>");
				out.println("<td width = '200' >&nbsp;<input type = 'password' name = 'pwd'>");
				out.println("</tr>");
				out.println("<tr>");
				out.println("<td align = 'center' colspan = '2' >");
				out.println("<input type = 'button' value = 'íšŒì›ê°€ì…'>");
				out.println("<input type = 'submit' value = 'ë¡œê·¸ì¸'>");
				out.println("</td>");
				out.println("</table>");
				out.println("</form>");
				out.println("</body></html>");
			}
			
		} finally {
			out.close();
		}
	}
	
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		processRequest(request, response);
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		processRequest(request, response);
	}

}
````
<br>

````java
package com.login;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

@WebServlet("/LoginCheck")
public class LoginCheck extends HttpServlet {
	private static final long serialVersionUID = 1L;
	
	protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		response.setCharacterEncoding("utf-8");
		
		String id = request.getParameter("id");
		String pwd = request.getParameter("pwd");
		
		// ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì •ë³´ë¥¼ ê°€ì ¸ì™€ í¼ì˜ ì •ë³´ì™€ ë¹„êµ
		String dbID = "admin"; // ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ê°€ì •í•¨
		String dbPWD = "1234";
		
		if (dbID.equals(id) && dbPWD.equals(pwd)) {
			HttpSession session = request.getSession();
			session.setAttribute("user", id);
		}
		
		response.sendRedirect("Login");
	}

	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		processRequest(request, response);
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		processRequest(request, response);
	}

}
````
<br>

````java
package com.login;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;


@WebServlet("/Logout")
public class Logout extends HttpServlet {
	private static final long serialVersionUID = 1L;

	protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		HttpSession session = request.getSession(false);
		
		if (session != null) {
			session.invalidate();
		}
		response.sendRedirect("Login");
	}

	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		processRequest(request, response);
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		processRequest(request, response);
	}

}
````
<br>
<br>

- - -
<br>
<br>
ê³µë¶€ë¥¼ í•˜ê³  ì‹¶ì€ë° í•˜ê¸° ì‹«ë‹¤ë©´ ë¯¿ì–´ì§€ë‚˜ìš”? ì•„ë¬´íŠ¼ ê·¸ëŸ¼ğŸ™„  
ì´í•´ëŠ” ì•ˆë˜ì§€ë§Œ ì¬ë¯¸ëŠ” ìˆë‹¤  
