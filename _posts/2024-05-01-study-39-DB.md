---
title: 일본 IT Java 웹개발자 수업 39일차 - DB
date: 2024-04-29 12:00:00
comments: true
categories: [study]
tags: [글로벌인, DB]
render_with_liquid: false
---

## 시퀀스
### 시퀀스 생성 형식
create sequence 시퀀스명  
- start with n &#10140; 시작 값 지정  
- increment by n &#10140; 증가 값 지정  
- maxvalue n &#10140; 최대값 지정. 값을 지정하지 않으면 무한대  
- minvalue n &#10140; 최소값 지정. 값을 지정하지 않으면 무한소  
- cycle / nocycle &#10140; 최대값까지 증가하고 다시 초기값으로 시작할 것인지 정함  
- cache n / nocache &#10140; 메모리 상의 시퀀스 값 관리. 기본 20.  
<br>

__currval, nextval을 사용할 수 있는 경우__  
1. 서브쿼리가 아닌 경우  
2. insert 문  
3. update 문  
<br>

__currval, nextval을 사용할 수 없는 경우__  
1. view 에서 select  
2. distinct 키워드가 있는 select  
3. group by, having, order by 절이 있는 select  
4. select, delete, dupdate의 서브쿼리  
5. creat table, alter table 명령어  
<br>

### 시퀀스 변경
create sequence 시퀀스명  
- start with n     
- increment by n     
- maxvalue n     
- minvalue n     
- cycle / nocycle     
- cache n / nocache  
<br>
<br>

## JDBC
JDBC를 이용한 데이터베이스 연결  

1단계 : `import java.sql.\*;`  

2단계 : 특정 데이터베이스 드라이브 검색  
		`oracle,jdbc.driver.OracleDriver`  

3단계 : 데이터베이스 연결  
		`Connection conn = DriverManager.getConnection(url, id, password)`  
		`jdbc:oracle:thin:@localhost:1521:sid(orcl)`  

4단계 : 쿼리문 작성  
		`1. Statement stme = conn.createStatement(); // 정적`  
		`2. PreparedStatement pstmt = prepareStatement(query); // 동적`  

5단계 : 결과 저장  
- 정적일 때  
	`ResultSet rs = stmt.executeQuery(query); // select (조회, 검색)`  
	`ResultSet rs = stmt.executeUpdate(query); // insert, update, delete`  

- 동적일 때  
	`ResultSet rs = pstmt.executeQuery(query); // select (조회, 검색)`  
	`ResultSet rs = pstmt.executeUpdate(query); // insert, update, delete`  

6단계 : 작업이 다 끝난 후 반드시 close()  

실행하고자 하는 sql문이 select 쿼리인 경우 쿼리의 실행 결과의 집합을 리턴받을 수 있는 `executeQuery()` 메소드를 사용  

## ResultSet
select 쿼리의 수행 결과로 얻어진 결과 집합을 추상화한 것  
결과 집합에서 데이터를 가져올 수 있는 다양한 메소드와 커서를 포함한다.  